<asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">
<asx:values>
<VERSION>1</VERSION>
<TYPE/>
<INTERFACE href="#o89"/>
<INTERFACET>
<FPINTERFACET>
<NAME/>
<STATE/>
<LANGUAGE>D</LANGUAGE>
<ID/>
<TEXT>Spiegelt die Gehaltsangabe eines Gefahrstoffes wieder</TEXT>
</FPINTERFACET>
<FPINTERFACET>
<NAME/>
<STATE/>
<LANGUAGE>E</LANGUAGE>
<ID/>
<TEXT>Reflects the content information of a hazardous product</TEXT>
</FPINTERFACET>
<FPINTERFACET>
<NAME/>
<STATE/>
<LANGUAGE>S</LANGUAGE>
<ID/>
<TEXT>Refleja indicación información de contenido sustancia pelig.</TEXT>
</FPINTERFACET>
</INTERFACET>
</asx:values>
<asx:heap xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:abap="http://www.sap.com/abapxml/types/built-in" xmlns:cls="http://www.sap.com/abapxml/classes/global" xmlns:dic="http://www.sap.com/abapxml/types/dictionary">
<cls:CL_FP_INTERFACE_DATA id="o89">
<CL_FP_INTERFACE_DATA classVersion="1">
<CODING href="#o93"/>
<PARAMETERS href="#o92"/>
<GLOBAL_DEFINITIONS href="#o91"/>
<REFERENCE_FIELDS href="#o90"/>
<XSD_DEFINITIONS/>
</CL_FP_INTERFACE_DATA>
</cls:CL_FP_INTERFACE_DATA>
<cls:CL_FP_REFERENCE_FIELDS id="o90">
<CL_FP_INTERFACE_DATA_CHANGED classVersion="1">
<INTERFACE_DATA href="#o89"/>
</CL_FP_INTERFACE_DATA_CHANGED>
<CL_FP_REFERENCE_FIELDS classVersion="1">
<REFERENCE_FIELDS>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>IT_HU_HAZARD_MAT-LPMENGE</VALUE>
<UNIT>IT_HU_HAZARD_MAT-UNIT</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-VSOLA</VALUE>
<UNIT>MATERIAL_ITEMS-MEINS</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-CWQUANTITY</VALUE>
<UNIT>MATERIAL_ITEMS-CWUNIT</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-WEIGHT</VALUE>
<UNIT>MATERIAL_ITEMS-UNIT_W</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-VOLUM</VALUE>
<UNIT>MATERIAL_ITEMS-UNIT_V</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-QUAN</VALUE>
<UNIT>MATERIAL_ITEMS-MEINS</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-CWQUAN</VALUE>
<UNIT>MATERIAL_ITEMS-CWUNIT</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-RESQ</VALUE>
<UNIT>MATERIAL_ITEMS-MEINS</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-QUANA</VALUE>
<UNIT>MATERIAL_ITEMS-ALTME</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-GM_DECRESE</VALUE>
<UNIT>MATERIAL_ITEMS-MEINS</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-LB_QUAN</VALUE>
<UNIT>MATERIAL_ITEMS-MEINS</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-CWQUAN</VALUE>
<UNIT>MATERIAL_ITEMS-CWUNIT</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>MATERIAL_ITEMS-CWCHANGE</VALUE>
<UNIT>MATERIAL_ITEMS-CWUNIT</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-G_WEIGHT</VALUE>
<UNIT>HU_HEADER-UNIT_GW</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-N_WEIGHT</VALUE>
<UNIT>HU_HEADER-UNIT_GW</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-T_WEIGHT</VALUE>
<UNIT>HU_HEADER-UNIT_TW</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-G_VOLUME</VALUE>
<UNIT>HU_HEADER-UNIT_GV</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-N_VOLUME</VALUE>
<UNIT>HU_HEADER-UNIT_GV</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-T_VOLUME</VALUE>
<UNIT>HU_HEADER-UNIT_TV</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-LENGTH</VALUE>
<UNIT>HU_HEADER-UNIT_LWH</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-WIDTH</VALUE>
<UNIT>HU_HEADER-UNIT_LWH</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-HEIGHT</VALUE>
<UNIT>HU_HEADER-UNIT_LWH</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-MAX_WEIGHT</VALUE>
<UNIT>HU_HEADER-UNIT_GW</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-MAX_VOLUME</VALUE>
<UNIT>HU_HEADER-UNIT_GV</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-MAX_LENGTH</VALUE>
<UNIT>HU_HEADER-UNIT_MAX_LWH</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-MAX_WIDTH</VALUE>
<UNIT>HU_HEADER-UNIT_MAX_LWH</UNIT>
</SFPREF>
<SFPREF>
<ACTIVE/>
<STANDARD/>
<DATATYPE>QUAN</DATATYPE>
<VALUE>HU_HEADER-MAX_HEIGHT</VALUE>
<UNIT>HU_HEADER-UNIT_MAX_LWH</UNIT>
</SFPREF>
</REFERENCE_FIELDS>
</CL_FP_REFERENCE_FIELDS>
</cls:CL_FP_REFERENCE_FIELDS>
<cls:CL_FP_GLOBAL_DEFINITIONS id="o91">
<CL_FP_INTERFACE_DATA_CHANGED classVersion="1">
<INTERFACE_DATA href="#o89"/>
</CL_FP_INTERFACE_DATA_CHANGED>
<CL_FP_GLOBAL_DEFINITIONS classVersion="1">
<GLOBAL_DATA>
<SFPGDATA>
<NAME>GV_CAD</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>CHAR10</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
<SFPGDATA>
<NAME>GV_MAXLZ</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>MAXLZ</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
<SFPGDATA>
<NAME>GV_LOTE</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>CHARG_D</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
<SFPGDATA>
<NAME>GV_PROD</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>SY-DATUM</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
<SFPGDATA>
<NAME>GV_UM</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>CHAR10</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
<SFPGDATA>
<NAME>GV_FECHA_P</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>SY-DATUM</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
<SFPGDATA>
<NAME>GV_LZEIH</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>LZEIH</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
<SFPGDATA>
<NAME>GV_DESCRIPCION</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>MAKTX</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
<SFPGDATA>
<NAME>GV_ENVASES</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>CHAR30</TYPENAME>
<DEFAULTVAL/>
<CONSTANT/>
</SFPGDATA>
</GLOBAL_DATA>
<TYPES/>
<FIELDSYMBOLS/>
</CL_FP_GLOBAL_DEFINITIONS>
</cls:CL_FP_GLOBAL_DEFINITIONS>
<cls:CL_FP_PARAMETERS id="o92">
<CL_FP_INTERFACE_DATA_CHANGED classVersion="1">
<INTERFACE_DATA href="#o89"/>
</CL_FP_INTERFACE_DATA_CHANGED>
<CL_FP_PARAMETERS classVersion="1">
<IMPORT_PARAMETERS>
<SFPIOPAR>
<NAME>HU_DETAILS</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>/SCWM/TT_WO_INFO</TYPENAME>
<OPTIONAL>X</OPTIONAL>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
<SFPIOPAR>
<NAME>SHP_LABEL</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>/SCWM/TT_SHPLABEL</TYPENAME>
<OPTIONAL>X</OPTIONAL>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
<SFPIOPAR>
<NAME>HU_HEADER</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>/SCWM/TT_HUHDR_INT</TYPENAME>
<OPTIONAL>X</OPTIONAL>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
<SFPIOPAR>
<NAME>PRINT_PARAM</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>/SCWM/S_PRINT</TYPENAME>
<OPTIONAL>X</OPTIONAL>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
<SFPIOPAR>
<NAME>HU_HIERARCHY</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>/SCWM/TT_HU_PRINT_TREE</TYPENAME>
<OPTIONAL>X</OPTIONAL>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
<SFPIOPAR>
<NAME>IT_HU_HAZARD_MAT</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>/SCWM/T_HU_HAZARD_MAT</TYPENAME>
<OPTIONAL>X</OPTIONAL>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
<SFPIOPAR>
<NAME>MATERIAL_ITEMS</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>/SCWM/TT_HU_MATERIAL</TYPENAME>
<OPTIONAL>X</OPTIONAL>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
<SFPIOPAR>
<NAME>ES_ORDENES</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>ZPPES_ORDENES</TYPENAME>
<OPTIONAL/>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
<SFPIOPAR>
<NAME>IT_SER_LABELS</NAME>
<TYPING>TYPE</TYPING>
<TYPENAME>/SCWM/TT_SER_LABEL</TYPENAME>
<OPTIONAL>X</OPTIONAL>
<BYVALUE/>
<DEFAULTVAL/>
<STANDARD/>
<CONSTANT/>
</SFPIOPAR>
</IMPORT_PARAMETERS>
<EXPORT_PARAMETERS/>
<TABLE_PARAMETERS/>
<EXCEPTIONS/>
</CL_FP_PARAMETERS>
</cls:CL_FP_PARAMETERS>
<cls:CL_FP_CODING id="o93">
<CL_FP_INTERFACE_DATA_CHANGED classVersion="1">
<INTERFACE_DATA href="#o89"/>
</CL_FP_INTERFACE_DATA_CHANGED>
<CL_FP_CODING classVersion="1">
<INPUT_PARAMETERS/>
<OUTPUT_PARAMETERS/>
<INITIALIZATION>
<FPCLINE/>
<FPCLINE>DATA: ls_order_objects TYPE bapi_pi_order_objects,</FPCLINE>
<FPCLINE> lt_components TYPE TABLE OF bapi_order_component,</FPCLINE>
<FPCLINE> ls_component TYPE bapi_order_component,</FPCLINE>
<FPCLINE> work_dt TYPE d.</FPCLINE>
<FPCLINE>DATA: lv_int TYPE char5.</FPCLINE>
<FPCLINE/>
<FPCLINE>IF sy-uname EQ 'LRUIZ.ABAP'.</FPCLINE>
<FPCLINE> BREAK-POINT.</FPCLINE>
<FPCLINE>ENDIF.</FPCLINE>
<FPCLINE/>
<FPCLINE>"Descripcion</FPCLINE>
<FPCLINE>gv_descripcion = es_ordenes-maktx.</FPCLINE>
<FPCLINE/>
<FPCLINE/>
<FPCLINE/>
<FPCLINE>"Fecha preferente</FPCLINE>
<FPCLINE>SELECT SINGLE * FROM marc INTO @DATA(ls_marc)</FPCLINE>
<FPCLINE> WHERE matnr EQ ( SELECT matnr FROM afpo WHERE aufnr EQ @es_ordenes-aufnr )</FPCLINE>
<FPCLINE> AND werks EQ ( SELECT pwerk FROM afpo WHERE aufnr EQ @es_ordenes-aufnr ).</FPCLINE>
<FPCLINE>IF sy-subrc EQ 0.</FPCLINE>
<FPCLINE> lv_int = ls_marc-maxlz.</FPCLINE>
<FPCLINE> CONDENSE lv_int NO-GAPS.</FPCLINE>
<FPCLINE>ENDIF.</FPCLINE>
<FPCLINE/>
<FPCLINE>"Cad</FPCLINE>
<FPCLINE>work_dt = sy-datum.</FPCLINE>
<FPCLINE/>
<FPCLINE>CASE ls_marc-lzeih.</FPCLINE>
<FPCLINE> WHEN 'D'.</FPCLINE>
<FPCLINE> work_dt = work_dt + lv_int.</FPCLINE>
<FPCLINE> WHEN 'DÍA'.</FPCLINE>
<FPCLINE> work_dt = work_dt + lv_int.</FPCLINE>
<FPCLINE> WHEN 'MON'.</FPCLINE>
<FPCLINE> CONDENSE lv_int.</FPCLINE>
<FPCLINE> CALL FUNCTION 'MONTH_PLUS_DETERMINE'</FPCLINE>
<FPCLINE> EXPORTING</FPCLINE>
<FPCLINE> months = lv_int</FPCLINE>
<FPCLINE> olddate = work_dt</FPCLINE>
<FPCLINE> IMPORTING</FPCLINE>
<FPCLINE> newdate = work_dt.</FPCLINE>
<FPCLINE> WHEN 'WCH'.</FPCLINE>
<FPCLINE> lv_int = lv_int * 7.</FPCLINE>
<FPCLINE> work_dt = work_dt + lv_int.</FPCLINE>
<FPCLINE>ENDCASE.</FPCLINE>
<FPCLINE/>
<FPCLINE>gv_cad = work_dt.</FPCLINE>
<FPCLINE/>
<FPCLINE>CONCATENATE gv_cad+6(2) '/' gv_cad+4(2) '/' gv_cad(4) INTO gv_cad.</FPCLINE>
<FPCLINE/>
<FPCLINE>"Unidad de Medida para etiqueta Chica</FPCLINE>
<FPCLINE>"SELECT SINGLE meins FROM mara INTO gv_um WHERE matnr EQ es_ordenes-matnr.</FPCLINE>
<FPCLINE>CASE es_ordenes-etiqueta.</FPCLINE>
<FPCLINE> WHEN 'C'.</FPCLINE>
<FPCLINE> gv_um = 'LITRO'.</FPCLINE>
<FPCLINE> WHEN 'M'.</FPCLINE>
<FPCLINE> gv_um = 'GALON'.</FPCLINE>
<FPCLINE> WHEN OTHERS.</FPCLINE>
<FPCLINE> gv_um = 'LITRO'.</FPCLINE>
<FPCLINE>ENDCASE.</FPCLINE>
<FPCLINE/>
<FPCLINE/>
<FPCLINE>"LOTE</FPCLINE>
<FPCLINE/>
<FPCLINE>ls_order_objects-components = 'X'.</FPCLINE>
<FPCLINE>"ls_component-batch = es_ordenes-matnr.</FPCLINE>
<FPCLINE>"append ls_component to lt_components.</FPCLINE>
<FPCLINE/>
<FPCLINE>CALL FUNCTION 'BAPI_PROCORD_GET_DETAIL'</FPCLINE>
<FPCLINE> EXPORTING</FPCLINE>
<FPCLINE> number = es_ordenes-aufnr</FPCLINE>
<FPCLINE> order_objects = ls_order_objects</FPCLINE>
<FPCLINE> TABLES</FPCLINE>
<FPCLINE> component = lt_components.</FPCLINE>
<FPCLINE>IF sy-subrc EQ 0 AND lt_components IS NOT INITIAL.</FPCLINE>
<FPCLINE> LOOP AT lt_components INTO ls_component.</FPCLINE>
<FPCLINE> SELECT SINGLE mtart FROM mara INTO @DATA(lv_mtart) WHERE matnr EQ @ls_component-material.</FPCLINE>
<FPCLINE> IF sy-subrc EQ 0 AND lv_mtart EQ 'ZHAL'.</FPCLINE>
<FPCLINE> gv_lote = ls_component-batch.</FPCLINE>
<FPCLINE> ENDIF.</FPCLINE>
<FPCLINE> ENDLOOP.</FPCLINE>
<FPCLINE>ENDIF.</FPCLINE>
<FPCLINE/>
<FPCLINE>"Prod</FPCLINE>
<FPCLINE>"SELECT SINGLE ersda FROM mara INTO gv_prod WHERE matnr EQ es_ordenes-matnr.</FPCLINE>
<FPCLINE>gv_prod = sy-datum.</FPCLINE>
<FPCLINE/>
<FPCLINE>"envases</FPCLINE>
<FPCLINE>CASE es_ordenes-envases.</FPCLINE>
<FPCLINE> WHEN '2B 4L'.</FPCLINE>
<FPCLINE> gv_envases = '2 Botes de 4 Lts.'.</FPCLINE>
<FPCLINE> WHEN '10B'.</FPCLINE>
<FPCLINE> gv_envases = '10 Botes'.</FPCLINE>
<FPCLINE> WHEN '4B 1L'.</FPCLINE>
<FPCLINE> gv_envases = '4 Botes de 1 L'.</FPCLINE>
<FPCLINE> WHEN '6B .5L'.</FPCLINE>
<FPCLINE> gv_envases = '6 Botes de .500 L'.</FPCLINE>
<FPCLINE> WHEN '6B'.</FPCLINE>
<FPCLINE> gv_envases = '6 Botes'.</FPCLINE>
<FPCLINE> WHEN '12C'.</FPCLINE>
<FPCLINE> gv_envases = '12 Cajas'.</FPCLINE>
<FPCLINE> WHEN OTHERS.</FPCLINE>
<FPCLINE/>
<FPCLINE>ENDCASE.</FPCLINE>
<FPCLINE/>
<FPCLINE>"Codigo de barras</FPCLINE>
</INITIALIZATION>
<FORMS/>
</CL_FP_CODING>
</cls:CL_FP_CODING>
</asx:heap>
</asx:abap>
